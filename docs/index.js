parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"njo6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={LEFT:"LEFT",RIGHT:"RIGHT",UP:"UP",DOWN:"DOWN"};exports.default=e;
},{}],"rbid":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={ALIEN:"ALIEN",BULLET:"BULLET",DOOR:"DOOR",HACKER:"HACKER",HERO:"HERO",WALL:"WALL"};exports.default=e;
},{}],"JXc7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={TEXT:"TEXT",RECT:"RECT",CIRCLE:"CIRCLE",IMAGE:"IMAGE",SPRITE:"SPRITE"};exports.default=e;
},{}],"Wu5v":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,e){for(var i,a=0;a<e.length;a++)(i=e[a]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),e=require("./directions.js"),i=a(e);function a(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(t){r(this,e),this.img=t,this.w=t.naturalWidth,this.h=t.naturalHeight,this.pw=this.w,this.ph=this.h/4,this.frame=1,this.tickCount=0,this.ticksPerFrame=10}return t(e,[{key:"draw",value:function(t,e){var a=Math.PI,r=void 0,s=void 0;switch(t.save(),this.tickCount+=1,this.tickCount>this.ticksPerFrame&&(this.tickCount=0,this.frame+=1,3<this.frame&&(this.frame=1)),t.translate(t.canvas.width/2,t.canvas.height/2),e.direction){case i.default.LEFT:t.rotate(-a/2);break;case i.default.TOP:r=e.x,s=e.y;break;case i.default.RIGHT:t.rotate(a/2);break;case i.default.BOTTOM:default:t.rotate(Math.PI),r=-e.x-this.pw-7+t.canvas.width/2,s=-e.y-this.ph-5+t.canvas.height/2}t.drawImage(this.img,0,this.ph*this.frame,this.pw,this.ph,r,s,e.w,e.h),t.restore()}}]),e}();exports.default=s;
},{"./directions.js":"njo6"}],"k5DX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,e){for(var i,s=0;s<e.length;s++)(i=e[s]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),e=require("./directions.js"),i=f(e),s=require("./families.js"),a=f(s),r=require("./shapeTypes.js"),h=f(r),l=require("./sprite.js"),n=f(l);function f(t){return t&&t.__esModule?t:{default:t}}function u(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var d=function(){function e(t){switch(c(this,e),this.children=t.children||[],this.dx=t.dx,this.dy=t.dy,this.family=t.family||a.default.WALL,this.fill=t.fill||"#000",this.h=t.h||2,this.img=t.img,this.name=t.name,this.sprite=t.sprite,this.text=t.text,this.type=t.type||h.default.RECT,this.w=t.w||2,this.x=t.x||0,this.y=t.y||0,this.zIndex=t.zIndex||1,this.id=++e.id,this.text?(this.font=t.font||4,this.text=t.text,this.type=h.default.TEXT):this.img?this.type=h.default.IMAGE:this.sprite&&(this.type=h.default.SPRITE),this.family){case a.default.HERO:this.x=15,this.y=50,this.direction=i.default.DOWN;case a.default.ALIEN:this.w=8,this.h=8,this.hp=t.hp||100,this.chp=this.hp,this.isInLineOfSight=!1,this.lastFireTime=0,this.direction=i.default.UP;break;case a.default.BULLET:this.byHero=t.byHero,this.dmg=t.dmg||10,this.fill="orange",this.w=1,this.h=1,this.type=h.default.CIRCLE,this.isReal=t.isReal,this.src=t.src;break;case a.default.WALL:this.fill=t.fill||"#fff"}}return t(e,[{key:"draw",value:function(t){var e=this;if(!1!==this.isReal){var i=t.canvas.width/100,s=t.canvas.height/100;[Object.create(this)].concat(u(this.children.map(function(t){var i=Object.create(t);return i.x+=e.x,i.y+=e.y,i}))).forEach(function(e){switch(e.x*=i,e.y*=s,e.w*=i,e.h*=s,t.strokeStyle="#000",t.fillStyle=e.fill,e.type){case h.default.CIRCLE:e.x+=e.w/2,e.y+=e.w/2,t.beginPath(),t.arc(e.x,e.y,e.w/2,0,2*Math.PI,0),t.fill();break;case h.default.RECT:t.fillRect(e.x,e.y,e.w,e.h);break;case h.default.TEXT:e.font*=s,e.y+=e.font,t.font=e.font+"px arial",t.fillText(e.text,e.x,e.y);break;case h.default.SPRITE:e.sprite.draw(t,e);break;case h.default.IMAGE:default:e.img&&t.drawImage(e.img,e.x,e.y,e.w,e.h)}e.hp&&(t.fillStyle="#00e635",t.fillRect(e.x,e.y-6,e.chp*e.w/e.hp,4))})}}},{key:"isColliding",value:function(t){return!(this.x+this.w<t.x||this.x>t.x+t.w||this.y+this.h<t.y||this.y>t.y+t.h)}}]),e}();exports.default=d,d.id=0;
},{"./directions.js":"njo6","./families.js":"rbid","./shapeTypes.js":"JXc7","./sprite.js":"Wu5v"}],"hZZ8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./gameObject.js"),a=n(e),t=require("./families.js"),l=n(t);function n(e){return e&&e.__esModule?e:{default:e}}var r=[new a.default({family:l.default.ALIEN,hp:200,h:5,w:5,y:90,x:30}),new a.default({family:l.default.ALIEN,hp:150,h:5,w:5,y:90,x:40}),new a.default({family:l.default.ALIEN,hp:100,h:5,w:5,y:90,x:50}),new a.default({family:l.default.ALIEN,hp:50,h:5,w:5,y:90,x:60}),new a.default({w:100,fill:"#000"}),new a.default({y:98,w:100,fill:"#000"}),new a.default({h:100,fill:"#000"}),new a.default({x:98,h:100,fill:"#000"}),new a.default({name:"L270",x:15,y:15,h:20,children:[new a.default({w:20})]}),new a.default({name:"L180DegreePart1",x:80,y:15,h:20}),new a.default({name:"L180DegreePart2",x:60,y:15,w:20}),new a.default({name:"T180DegreePart1",x:46,y:15,h:20}),new a.default({name:"T180DegreePart2",x:37,y:35,w:20}),new a.default({name:"L2_270DegreePart1",x:15,y:65,h:20}),new a.default({name:"L2_270DegreePart2",x:15,y:65,w:26}),new a.default({name:"L2_180DegreePart1",x:80,y:65,h:20}),new a.default({name:"L2_180DegreePart2",x:55,y:65,w:25}),new a.default({name:"L3_270DegreePart1",x:32,y:50,h:17,children:[new a.default({name:"L3_270DegreePart2",w:30}),new a.default({name:"L3_270DegreePart2",x:30,h:17})]}),new a.default({name:"L3_270DegreePart2",x:15,y:65,w:20}),new a.default({name:"L3_180DegreePart1",x:80,y:65,h:20}),new a.default({name:"L3_180DegreePart2",x:60,y:65,w:20})];exports.default=r;
},{"./gameObject.js":"k5DX","./families.js":"rbid"}],"QcRT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,e){for(var i,s=0;s<e.length;s++)(i=e[s]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),e=require("./directions.js"),i=d(e),s=require("./families.js"),h=d(s),r=require("./gameObject.js"),a=d(r),n=require("./level.js"),c=d(n),l=require("./shapeTypes.js"),o=d(l),f=require("./sprite.js"),u=d(f);function d(t){return t&&t.__esModule?t:{default:t}}function x(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var v={MAIN_MENU:"MAIN_MENU",IN_GAME:"IN_GAME",END_GAME:"END_GAME"},p=function(){function e(t,i,s,r){var n=this;y(this,e),this.assets=r,this.ctx=document.createElement("canvas").getContext("2d"),this.ctx.canvas.width=this.w=i,this.ctx.canvas.height=this.h=s,t.appendChild(this.ctx.canvas),this.topScore=localStorage.topScore||0,this.score=0,this.difficulty=1,this.screen=v.IN_GAME,this.objects=Object.create(c.default),this.bullets=[],this.hero=new a.default({family:h.default.HERO,sprite:new u.default(r.hero)}),this.keyState={},this.ctx.canvas.addEventListener("click",function(t){return n.handleInput(t)}),document.addEventListener("keydown",function(t){return n.handleInput(t)}),document.addEventListener("keyup",function(t){return n.handleInput(t)}),this.redraw()}return t(e,[{key:"redraw",value:function(){var t=this;this.clear(),this.screen===v.MAIN_MENU?this.drawMenu():this.screen===v.END_GAME?this.drawEnd():(this.updateState(),this.draw()),window.requestAnimationFrame(function(){t.redraw()})}},{key:"updateState",value:function(){var t=this,e=[this.hero].concat(x(this.getObjects())),s=Object.create(this.hero),r=.33;1<Object.values(this.keyState).filter(function(t){return t}).length&&(r/=1.5),(this.keyState[37]||this.keyState[65])&&(s.x-=r,s.direction=i.default.LEFT),(this.keyState[38]||this.keyState[87])&&(s.y-=r,s.direction=i.default.UP),(this.keyState[39]||this.keyState[68])&&(s.x+=r,s.direction=i.default.RIGHT),(this.keyState[40]||this.keyState[83])&&(s.y+=r,s.direction=i.default.DOWN);for(var a,n=[],l=0;l<e.length;l+=1)if((a=e[l]).type!==o.default.TEXT){a.family===h.default.WALL&&s.isColliding(a)&&(s=this.hero);for(var f,u=0;u<this.bullets.length;u+=1)(!(f=this.bullets[u]).byHero||a.family!==h.default.HERO)&&(f.byHero||a.family!==h.default.ALIEN)&&f.isColliding(a)&&(f.src.isInLineOfSight=a.family!==h.default.WALL,f.isReal&&(a.chp-=f.dmg,0>=a.chp&&(a.family===h.default.HERO?(this.screen=v.END_GAME,u=this.bullets.length,l=e.length):n.push(a.id))),this.bullets.splice(u,1));if(a.family===h.default.ALIEN){var d=a.isInLineOfSight?1e3:50,y=Date.now();y-a.lastFireTime>d&&(this.addBullet(null,a),a.lastFireTime=y)}}this.bullets.forEach(function(t){t.x+=t.dx,t.y+=t.dy}),this.hero=s,this.objects=this.objects.filter(function(e){return!(-1<n.indexOf(e.id)&&(t.score+=e.hp/10*t.difficulty,1))}),0===this.objects.filter(function(t){return t.family===h.default.ALIEN}).length&&(this.difficulty+=1,this.hero.chp=100,this.hero.x=45,this.hero.y=5,this.objects=Object.create(c.default),this.screen=v.IN_GAME)}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}},{key:"draw",value:function(){var t=this;this.addFlooring(),this.addLighting(),this.bullets.forEach(function(e){e.draw(t.ctx)}),this.objects.sort(function(t,e){return t.zIndex-e.zIndex}).forEach(function(e){e.draw(t.ctx)}),this.hero.draw(this.ctx),this.drawHUD()}},{key:"addFlooring",value:function(){this.ctx.lineWidth=1,this.ctx.strokeStyle="rgba(1,14,4,0.2)",this.ctx.beginPath();for(var t=0;t<this.w-0;t+=20)for(var e=0;e<this.h-0;e+=20)this.ctx.rect(t,e,20,20);this.ctx.stroke()}},{key:"addLighting",value:function(){var t=this.w/2,e=this.h/2,i=this.ctx.createRadialGradient(t,e,50,t,e,this.w-100);i.addColorStop(0,"rgba(17,102,37,0.9)"),i.addColorStop(1,"rgba(1,14,4,1)"),this.ctx.fillStyle=i,this.ctx.fillRect(0,0,this.w,this.h)}},{key:"drawHUD",value:function(){var t=3.5*this.h/100;this.ctx.fillStyle="rgba(1,14,4,0.5)",this.ctx.fillRect(0,0,this.w,50),this.ctx.textAlign="center",this.ctx.font=t+"px arial",this.ctx.fillStyle="#fff",this.ctx.fillText("Score: "+this.score+"         Level: "+this.difficulty+"         Health: "+this.hero.chp+"         Top Score: "+this.topScore,this.w/2,33)}},{key:"drawMenu",value:function(){var t=8*this.h/100,e=this.w/2,i=40*this.h/100;this.ctx.fillStyle="rgba(1,14,4,1)",this.ctx.fillRect(0,0,this.w,this.h),this.ctx.textAlign="center",this.ctx.fillStyle="#fff",this.ctx.font=t+"px arial",this.ctx.fillText("Tony Hawk's Gun Smash",e,i),this.ctx.fillStyle="rgba(255,255,255,0.5)",this.ctx.font=t/2+"px arial",this.ctx.fillText("Click anywhere to start",e,1.75*i)}},{key:"drawEnd",value:function(){var t=8*this.h/100,e=this.w/2,i=40*this.h/100;this.ctx.fillStyle="rgba(1,14,4,1)",this.ctx.fillRect(0,0,this.w,this.h),this.ctx.textAlign="center",this.ctx.fillStyle="#fff",this.ctx.font=t+"px arial",this.score>this.topScore?this.ctx.fillText("You Pro!",e,i):this.ctx.fillText("What a Noob!",e,i),this.ctx.fillStyle="rgba(255,255,255,0.5)",this.ctx.font=t/2+"px arial",this.ctx.fillText("See you next time!",e,1.25*i),this.ctx.fillText("Click anywhere to restart",e,1.75*i)}},{key:"handleInput",value:function(t){t.preventDefault(),1===t.which?this.screen===v.MAIN_MENU?(this.hero.chp=100,this.hero.x=45,this.hero.y=5,this.screen=v.IN_GAME,this.objects=Object.create(c.default)):this.screen===v.IN_GAME?this.addBullet(t):this.screen===v.END_GAME&&(this.screen=v.MAIN_MENU,this.score>this.topScore&&(this.topScore=this.score,localStorage.topScore=this.topScore,this.score=0)):-1<t.type.indexOf("down")?this.keyState[t.which]=t:this.keyState[t.which]=!1}},{key:"addBullet",value:function(t,e){var i=Math.pow,s=void 0,r=void 0,n=void 0,c=void 0,l=!e;if(t){var o=this.ctx.canvas.getBoundingClientRect();s=this.hero.x,r=this.hero.y,n=-this.w/100+100*(t.clientX-o.left)/this.w,c=-this.h/100+100*(t.clientY-o.top)/this.h}else s=e.x,r=e.y,n=this.hero.x,c=this.hero.y;var f=n-s,u=c-r,d=Math.sqrt(i(f,2)+i(u,2));s+=this.hero.w/2,r+=this.hero.h/2,this.bullets.push(new a.default({byHero:l,dx:f/d*1.5,dy:u/d*1.5,family:h.default.BULLET,x:s,y:r,src:e||this.hero,isReal:l||e.isInLineOfSight}))}},{key:"getObjects",value:function(){return this.objects.reduce(function(t,e){return t.push(e),e.children.forEach(function(i){var s=Object.create(i);s.x+=e.x,s.y+=e.y,t.push(s)}),t},[])}}]),e}();exports.default=p;
},{"./directions.js":"njo6","./families.js":"rbid","./gameObject.js":"k5DX","./level.js":"hZZ8","./shapeTypes.js":"JXc7","./sprite.js":"Wu5v"}],"Focm":[function(require,module,exports) {
"use strict";var e=require("./game.js"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}new t.default(document.querySelector("#game"),480,480,{hero:document.getElementById("hero"),enemy:document.getElementById("hero")});
},{"./game.js":"QcRT"}]},{},["Focm"], null)
//# sourceMappingURL=/index.map